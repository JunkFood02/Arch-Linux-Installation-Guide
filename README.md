# Arch Linux å®‰è£…ç®€æ˜æµç¨‹

è¿™æ˜¯ä¸€ç¯‡ä¸º **GPT/EFI å¼•å¯¼** çš„ç”µè„‘å®‰è£… Arch Linuxï¼ˆåŒç³»ç»Ÿï¼‰çš„ä¸­æ–‡ç®€æ˜æµç¨‹ï¼Œå°½å¯èƒ½çœç•¥äº†å¯ä»¥çœç•¥çš„æµç¨‹ä¸æ–‡å­—ä»¥ä½¿å¾—ç¯‡å¹…å°½é‡çŸ­å°ï¼ŒåŸºæœ¬ä¸ŠåŸºäº [Arch Wiki Installation guide](https://wiki.archlinux.org/title/installation_guide) ä»¥åŠç”±è”åˆ›å›¢é˜Ÿ Android ç»„å­¦é•¿çš„è¿™ç¯‡ [ä¼˜ç§€çš„å®‰è£…æ•™ç¨‹](https://www.viseator.com/2017/05/17/arch_install/)ï¼Œç‰¹æ­¤è¡¨ç¤ºæ„Ÿè°¢ã€‚

æœ¬æ–‡ä¸¥æ ¼æŒ‰ç…§æ“ä½œé¡ºåºè¿›è¡Œç¼–å†™ï¼Œè¿˜è¯·è®¤çœŸé˜…è¯»æ¯ä¸€æ­¥æ“ä½œçš„è¯´æ˜ä»¥åŠæ³¨æ„äº‹é¡¹ã€‚

> è¯´æ˜ï¼šä¸‹æ–‡ä¸­æ‰€æŒ‡æ•™ç¨‹å‡æŒ‡æ­¤ç¯‡æ•™ç¨‹: [ä»¥å®˜æ–¹Wikiçš„æ–¹å¼å®‰è£…ArchLinux](https://viseator.github.io/2017/05/17/arch_install/)ã€‚



## å®‰è£…å‰å‡†å¤‡

1. å¤§äº 100G çš„ç¡¬ç›˜ç©ºä½™ç©ºé—´ã€‚
2. ä¸€å—å‚¨å­˜ç©ºé—´è‡³å°‘ 4G çš„ U ç›˜ã€‚
3. ç¨³å®šï¼Œè€Œä¸éœ€è¦é¢å¤–è¿›è¡Œè®¾å¤‡è®¤è¯çš„æœ‰çº¿/æ— çº¿ç½‘ç»œè¿æ¥ï¼Œå¦‚æ‰‹æœºçƒ­ç‚¹ç­‰ã€‚
4. è‡³å°‘ 3 å°æ—¶~~æˆ–é•¿è¾¾æ•°æ˜ŸæœŸ~~çš„æ—¶é—´ã€‚
5. åŸºæœ¬çš„æœç´¢å¼•æ“ä½¿ç”¨èƒ½åŠ›ä»¥åŠè‹±è¯­é˜…è¯»èƒ½åŠ›ã€‚
5. ~~å¤Ÿé—²~~





## å‡†å¤‡å®‰è£…ä»‹è´¨ä¸ç£ç›˜åˆ†åŒº

### å®‰è£…ä»‹è´¨

æ­¤å¤„é»˜è®¤ä½ ä½¿ç”¨ Windows ç³»ç»Ÿï¼Œå…¶ä»–æƒ…å†µè¯·å‚é˜… [Arch Wiki](https://wiki.archlinux.org/title/USB_flash_installation_medium)ã€‚

1. ä¸‹è½½ Arch Linux æœ€æ–°çš„ç³»ç»Ÿé•œåƒï¼Œåœ¨ [ä¸‹è½½é¡µé¢](https://archlinux.org/download/) ä¸‹æ–¹æ‰¾åˆ° China çš„é•œåƒæºï¼Œå¦‚ `tuna.tsinghua.edu.cn`ï¼Œä¸‹è½½æ–‡ä»¶åå½¢å¦‚ `archlinux-2022.04.05-x86_64.iso` çš„ iso é•œåƒæ–‡ä»¶ã€‚
2. ä¸‹è½½ [Rufus](https://rufus.ie/zh/)ï¼Œè§£å‹å³ç”¨çš„ä¾¿æºç‰ˆå³å¯ã€‚
3. ä½¿ç”¨ Rufus å°† Arch Linux é•œåƒè£…è½½åˆ° U ç›˜ï¼Œæ‰€æœ‰å‚æ•°ä¿æŒé»˜è®¤ä¸ä¿®æ”¹å³å¯ï¼Œå¦‚æœ U ç›˜å†…å­˜æ”¾æœ‰æ•°æ®è¯·å…ˆå¤‡ä»½ã€‚

### ç£ç›˜åˆ†åŒº

> **Warning**
>
> é‡è¦æç¤ºï¼šå¦‚æœä½ çš„ Windows ç”µè„‘ä¸ºç£ç›˜åŠ ä¸Šäº† **Bitlocker é”**ï¼Œè¯·åŠ¡å¿…è§£é™¤åå†è¿›è¡Œä»»ä½•ç£ç›˜æ“ä½œï¼Œå¦åˆ™ä¼šä¸ºä½ å¸¦æ¥å·¨å¤§çš„ä¸å¹¸ã€‚

æ­¤å¤„é»˜è®¤ Arch Linux ä¸åŸç³»ç»Ÿå®‰è£…åœ¨åŒä¸€å—ç¡¬ç›˜ä¸Šï¼Œå¦‚æœä½ éœ€è¦åœ¨ä¸€å—æ–°ç¡¬ç›˜ä¸Šå®‰è£…ï¼Œä½ è¿˜éœ€è¦ç¡®å®šæˆ–è½¬æ¢æ–°ç¡¬ç›˜çš„åˆ†åŒºè¡¨ä¸º GPT æ ¼å¼ï¼Œå¹¶æ–°å»ºä¸€ä¸ª EFI åˆ†åŒºã€‚å…·ä½“çš„å…¶ä»–æƒ…å†µè¯·æŸ¥é˜… Arch Wikiã€[æ•™ç¨‹](https://www.viseator.com/2017/05/17/arch_install/) æˆ–è‡ªè¡Œæœç´¢ã€‚

1. ä½¿ç”¨ Windows è‡ªå¸¦çš„ç£ç›˜ç®¡ç†ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨å¼€å§‹èœå•ä¸­æœç´¢æ‰¾åˆ°å®ƒï¼Œæˆ–è€…å³é”®å•å‡»è®¡ç®—æœºï¼Œé€‰æ‹©ç®¡ç†ã€‚
2. **å‹ç¼©** æœ‰ç©ºä½™ç©ºé—´çš„ç£ç›˜åˆ†åŒºï¼Œåˆ†é…ä¸€å—ç©ºé—´ç»™ Arch Linuxï¼Œå¤šå¤šç›Šå–„ï¼Œæœ€å°ä¸è¦å°äº 60Gï¼Œå¦‚æœä½ è¦ä½¿ç”¨ Arch Linux ä½œä¸ºä½ çš„ä¸»è¦å¼€å‘ç¯å¢ƒï¼Œæ­¤åˆ†åŒºå»ºè®®ä¸è¦å°äº 200Gã€‚~~ï¼ˆæˆ‘åˆ†äº†ä¸€æ•´å—ç¡¬ç›˜ï¼‰~~
3. **ä¸è¦** åœ¨è¿™é‡Œæ–°å»ºä¸€ä¸ªæ–°åˆ†åŒºï¼Œè€Œæ˜¯åœ¨è¿›å…¥ Arch Linux å®‰è£…ç¨‹åºåå†è¿›è¡Œè¿™ä¸€æ­¥ã€‚



## BIOS è®¾ç½®

ä¸åŒå“ç‰Œçš„ç”µè„‘/ä¸»æ¿è¿›å…¥ BIOS è®¾ç½®çš„æ–¹æ³•ä¸ä¸€æ ·ï¼Œè”æƒ³ä»¥åŠæˆ´å°”æ˜¯åœ¨ **æŒ‰ä¸‹å¼€æœºé”®å‡ºç°å“ç‰Œå¾½æ ‡æ—¶** æŒ‰ F2ï¼ˆæˆ– Fn+F2ï¼‰ï¼Œå¯åŠ¨èœå•æ˜¯æŒ‰ä¸‹ F12ï¼Œå…¶ä»–å“ç‰Œè¯·è‡ªè¡Œæœç´¢ã€‚

å„å“ç‰Œ BIOS è®¾ç½®ç•Œé¢å„è‡ªä¸åŒï¼Œä½†éœ€è¦åšçš„äº‹æƒ…å¤§åŒå°å¼‚ã€‚

1. å…³é—­ `Secure Boot`ï¼ŒArch Linux å®‰è£…ç¨‹åºæ— æ³•ä½¿ç”¨ `Secure Boot` å¯åŠ¨ï¼Œä½ å¯ä»¥åœ¨å®Œæˆå®‰è£…ä¹‹åå†å¯ç”¨æ­¤åŠŸèƒ½ã€‚
2. æŸäº›å“ç‰Œï¼ˆå¦‚æˆ´å°”ï¼‰çš„ç”µè„‘å¯èƒ½ä¸ä¼šåœ¨å…¶ä»–ç³»ç»Ÿä¸­é»˜è®¤å¼€å¯ç½‘å¡ï¼Œéœ€è¦åœ¨è®¾ç½®ä¸­å¯ç”¨  `Enable UEFI Network Stack`ã€‚
3. è°ƒæ•´ BIOS é»˜è®¤çš„å¯åŠ¨é¡ºåºï¼ˆ`Boot Sequence` / `Boot Order`ï¼‰ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰è£…è½½æœ‰ Arch Linux çš„ U ç›˜ï¼Œå°†å…¶é¡ºåºè°ƒæ•´åˆ°ç¬¬ä¸€ä½ï¼ˆä½ ä¹Ÿå¯ä»¥åœ¨è®¡ç®—æœºå¯åŠ¨æ—¶æ‰‹åŠ¨è¿›å…¥å¯åŠ¨èœå•é€‰æ‹©è¦å¯åŠ¨çš„ç³»ç»Ÿï¼‰ï¼Œä¿å­˜ BIOS è®¾ç½®å¹¶é€€å‡ºã€‚

   > è¯´æ˜ï¼šå¦‚æœåœ¨è¿™é‡Œæ‰¾ä¸åˆ°ä½ çš„ U ç›˜ï¼ˆè®¾å¤‡åå½¢å¦‚ `ARCH_202204` ï¼‰ï¼Œè¯´æ˜å¯èƒ½ä½ çš„è®¾å¤‡å¼€å¯äº† `Secure Boot` å¯¼è‡´ BIOS æ— æ³•æ‰¾åˆ°ç³»ç»Ÿå…¥å£ï¼Œä¿å­˜ BIOS è®¾ç½®é€€å‡ºåé‡æ–°è¿›è¡Œè¿™ä¸€æ­¥å³å¯ã€‚






## å¼€å§‹å®‰è£… Arch Linux

å®Œæˆäº† BIOS çš„è®¾ç½®åï¼Œé‡å¯è®¡ç®—æœºï¼Œæˆ‘ä»¬åº”è¯¥è¿›å…¥åˆ°äº† Arch Linux çš„ç•Œé¢ï¼Œé€‰æ‹©ç¬¬ä¸€ä¸ªè¿›å…¥å®‰è£…ç¨‹åºå³å¯è¿›å…¥ `zsh` å‘½ä»¤è¡Œç•Œé¢ã€‚





## è¿æ¥ç½‘ç»œä¸æ›´æ–°ç³»ç»Ÿæ—¶é—´

> è¯´æ˜ï¼šæ­¤éƒ¨åˆ†é—®é¢˜è¾ƒå¤šï¼Œè¯·è€å¿ƒä½¿ç”¨æ§åˆ¶å˜é‡æ³•ä»¥åŠæœç´¢å¼•æ“è¿›è¡Œé—®é¢˜æ’æŸ¥ã€‚



### è¿æ¥æœ‰çº¿ç½‘ç»œ

ä¸åŒå‹å·çš„æ— çº¿ç½‘å¡çš„æ”¯æŒæƒ…å†µä¸åŒï¼Œè‹¥æœ‰æ¡ä»¶æ¨èä¼˜å…ˆä½¿ç”¨æœ‰çº¿ç½‘ç½‘ç»œè¿›è¡Œè¿æ¥ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ USB çº¿å°†æ‰‹æœºè¿æ¥ç”µè„‘ä½¿ç”¨æ‰‹æœºçš„æ•°æ®ç½‘ç»œã€‚

æ¥å…¥ç½‘çº¿æˆ–æ‰‹æœºè¿›è¡Œæœ‰çº¿ç½‘è¿æ¥ï¼Œå¹¶æµ‹è¯•ç½‘ç»œæ˜¯å¦è”é€š


```
ping www.baidu.com
```

> ä½¿ç”¨ `Ctrl+C` ä¸­æ­¢å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‘½ä»¤





### è¿æ¥æ— çº¿ç½‘ç»œ



#### äº‹å‰æ•…éšœæ’é™¤

è§£é™¤å¯èƒ½å‡ºç°çš„è½¯ç¡¬ä»¶ block


```shell
rfkill unblock all
```

åˆ—å‡ºå½“å‰ç½‘ç»œè®¾å¤‡

```shell
ip link show
```

ä¸€èˆ¬è€Œè¨€ï¼Œæ— çº¿ç½‘å¡çš„åå­—é»˜è®¤ä¸º `wlan0`ï¼Œæ£€æŸ¥å…¶çŠ¶æ€ï¼Œè‹¥ä¸º `DOWN` è¿˜éœ€è®¾ç½®ä¸º `UP`ï¼Œ*wlan0* è¯·æ›¿æ¢æˆæ­¤å¤„æ˜¾ç¤ºçš„ç½‘å¡å

```
ip link set wlan0 up
```



æ‰§è¡Œä»¥ä¸‹å‘½ä»¤

```
iwctl
```

ä¼šè¿›å…¥ä¸€ä¸ªä»¥ [iwd] å¼€å¤´çš„å‘½ä»¤è¡Œç¯å¢ƒä¸­ï¼Œæ¥ç€æ‰§è¡Œï¼š

```
device list
```

ä¼šåˆ—å‡ºå½“å‰å¯ç”¨çš„æ‰€æœ‰ç½‘å¡è®¾å¤‡ï¼Œä¸€èˆ¬è€Œè¨€ï¼Œæ— çº¿ç½‘å¡çš„åå­—é»˜è®¤ä¸º `wlan0`ï¼Œæ¥ç€æ‰§è¡Œä¸‹åˆ—å‘½ä»¤è¿›è¡Œæ— çº¿ç½‘ç»œçš„æ‰«æï¼š`wlan0` è¯·æ›¿æ¢æˆæ­¤å¤„æ˜¾ç¤ºçš„ç½‘å¡å

```
station wlan0 scan
```

æ¥ç€æ‰§è¡Œä¸‹åˆ—å‘½ä»¤åˆ—å‡ºæ‰«æåˆ°çš„ç½‘ç»œï¼š

```
station wlan0 get-networks
```

æœ€åè¾“å…¥ä¸‹åˆ—å‘½ä»¤è¿æ¥æŒ‡å®šç½‘ç»œï¼š`Wifi-SSID` è¯·åˆ‡æ¢æˆä½ æƒ³è¦è¿æ¥çš„ç½‘ç»œï¼Œè¾“å…¥å¯†ç å›è½¦å³å¯è¿æ¥æˆåŠŸã€‚

```
station wlan0 connect Wifi-SSID
```

> æç¤ºï¼šå•æ¬¡æˆ–å¤šæ¬¡æŒ‰ä¸‹ `Tab` å¯ä»¥è¡¥å…¨æˆ–é€‰æ‹©å¯èƒ½çš„é€‰é¡¹ï¼Œå…å»è¾“å…¥æ ¡å¯¹ä¹‹è‹¦

ä½¿ç”¨ `quit` é€€å‡º `iwc`ï¼Œæµ‹è¯•ç½‘ç»œæ˜¯å¦è”é€š

```
ping www.baidu.com
```

> ä½¿ç”¨ `Ctrl+C` ä¸­æ­¢å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‘½ä»¤

> æç¤ºï¼šå¯ä»¥ä½¿ç”¨æ–¹å‘é”®çš„ä¸Šã€ä¸‹é”®æ¥æŸ¥çœ‹æ›¾ç»æ‰§è¡Œè¿‡çš„æŒ‡ä»¤çš„å†å²è®°å½•



### è®¾ç½®ç³»ç»Ÿæ—¶é—´

```
timedatectl set-ntp true
```

æ“ä½œæˆåŠŸæ— æç¤º





## åˆ†åŒºçš„æ ¼å¼åŒ–ä¸æŒ‚è½½

> **Warning**
>
> è­¦å‘Šï¼šé™¤éä½ æ¸…æ¥šä½ è‡ªå·±åœ¨åšä»€ä¹ˆï¼Œå¦åˆ™è¯·ä¸è¦å¯¹ç¡¬ç›˜åˆ†åŒºè¡¨ã€ä»¥åŠé™¤è‡ªå·±æ–°å»ºçš„åˆ†åŒºä¹‹å¤–çš„åˆ†åŒºè¿›è¡Œä»»ä½•æ“ä½œï¼Œå¹¶ä¸”è¯·å¤šæ¬¡æ£€æŸ¥è‡ªå·±æœ‰æ²¡æœ‰è¾“é”™å‘½ä»¤ï¼Œä»¥é˜²å¯¹å…¶ä»–åˆ†åŒºçš„æ•°æ®äº§ç”Ÿå½±å“ã€‚
>
> æ¢è€Œè¨€ä¹‹ï¼Œåªè¦ä½ ä¸å¯¹å…¶ä»–åˆ†åŒºï¼ˆWindows ç›¸å…³åˆ†åŒºï¼‰è¿›è¡Œä»»ä½•æ“ä½œï¼Œå°±ä¸éœ€è¦æ‹…å¿ƒæœ‰ä»»ä½•æ•°æ®ä¸¢å¤±çš„é£é™©ã€‚



### ä½¿ç”¨å·²æœ‰çš„ EFI ç³»ç»Ÿåˆ†åŒº

å¦‚æœä½ åœ¨ä¸€ä¸ª **å·²ç»å®‰è£…æœ‰ Windows çš„ç¡¬ç›˜** ä¸Šå®‰è£… Arch Linuxï¼Œä½ å¹¶ä¸éœ€è¦å¯¹å·²å­˜åœ¨çš„åˆ†åŒºè¿›è¡Œä»»ä½•æ“ä½œï¼Œè¯·ç›´æ¥è·³è‡³ **æ–°å»ºæ•°æ®åˆ†åŒº**



### æ–°å»º EFI ç³»ç»Ÿåˆ†åŒº

å¦‚æœä½ åœ¨ä¸€å— **æ–°ç¡¬ç›˜** ä¸Šå®‰è£… Arch Linuxï¼Œåˆ™éœ€è¦ä¸ºå…¶æ–°å»ºä¸€ä¸ª EFI ç³»ç»Ÿåˆ†åŒºï¼›

å¦‚æœä½ è¦åœ¨ä¸€å—å·²ç»å®‰è£…æœ‰ Windows çš„ç¡¬ç›˜ä¸Šå®‰è£… Arch Linuxï¼Œ**è·³è¿‡è¿™ä¸€æ­¥**



åˆ—å‡ºå½“å‰æ‰€æœ‰è®¾å¤‡ä¸åˆ†åŒº

```
fdisk -l
```

é€‰æ‹©è¿›å…¥å³å°†å®‰è£… Arch Linux çš„ **æ–°ç¡¬ç›˜**ï¼Œå½¢å¦‚ `/dev/nvme0n1`ï¼ˆè¯·ä»¥è‡ªå·±çš„è®¾å¤‡æƒ…å†µä¸ºå‡†ï¼‰

```
fdisk /dev/nvme0n1
```

ä½¿ç”¨ `F` åˆ—å‡ºå½“å‰çš„æœªåˆ†é…ç©ºé—´ï¼ˆå³åœ¨ Windows ä¸‹åˆ†é…å‡ºçš„ç©ºé—´ï¼‰

ä½¿ç”¨ `n` åœ¨æœªåˆ†é…ç©ºé—´æ–°å»ºåˆ†åŒºï¼Œåˆ†åŒºå·ä¸èµ·å§‹æ‰‡åŒºé»˜è®¤å³å¯ï¼Œç»ˆæ­¢æ‰‡åŒºè¾“å…¥ `+500M`ï¼Œå³ç»™è¯¥æ–°åˆ†åŒºåˆ†é… 500M ç©ºé—´

æ–°å»ºå®Œæˆåä½¿ç”¨ `t`ï¼Œé€‰ä¸­è¯¥åˆ†åŒºåå°†è¯¥åˆ†åŒºæ ‡è®°ä¸º `EFI System` åˆ†åŒºï¼Œä½¿ç”¨ `L` å¯ä»¥æ‰¾åˆ° EFI System åˆ†åŒºç±»å‹æ ‡å·ï¼Œå¦‚æ— æ„å¤–åº”è¯¥æ˜¯ `1`

`w` ä¿å­˜å¹¶é€€å‡º

æ ¼å¼åŒ–è¯¥åˆ†åŒºï¼Œå‡è®¾è¯¥åˆ†åŒºåä¸º `/dev/nvme0n1p1`

```
mkfs.fat -F32 /dev/nvme0n1p1
```



### æ–°å»ºæ•°æ®åˆ†åŒº

åˆ—å‡ºå½“å‰æ‰€æœ‰è®¾å¤‡ä¸åˆ†åŒº

```
fdisk -l
```

é€‰æ‹©è¿›å…¥å³å°†å®‰è£… Arch Linux çš„ç¡¬ç›˜ï¼Œå½¢å¦‚ `/dev/nvme0n1`ï¼ˆè¯·ä»¥è‡ªå·±çš„è®¾å¤‡æƒ…å†µä¸ºå‡†ï¼‰

```
fdisk /dev/nvme0n1
```

ä½¿ç”¨ `F` åˆ—å‡ºå½“å‰çš„æœªåˆ†é…ç©ºé—´ï¼ˆå³åœ¨ Windows ä¸‹åˆ†é…å‡ºçš„ç©ºé—´ï¼‰

ä½¿ç”¨ `n` åœ¨æœªåˆ†é…ç©ºé—´æ–°å»ºåˆ†åŒºï¼Œå¦‚æ— æ„å¤–å…¨éƒ¨é»˜è®¤å³å¯

`w` ä¿å­˜å¹¶é€€å‡º



### æ ¼å¼åŒ–æ•°æ®åˆ†åŒº

åˆ—å‡ºå½“å‰æ‰€æœ‰åˆ†åŒº

```
fdisk -l
```

æ‰¾åˆ° **EFI System åˆ†åŒº** ä»¥åŠåˆšåˆšå»ºç«‹çš„ **Linux Filesystem æ–°åˆ†åŒº** ï¼Œ**è®°ä¸‹è¿™ä¸¤ä¸ªåˆ†åŒºçš„è·¯å¾„**ï¼ˆå½¢å¦‚ `/dev/nvme0n1p1` ä¸ `/dev/nvme0n1p5`ï¼‰ã€‚EFI ç³»ç»Ÿåˆ†åŒºä¸€èˆ¬å¤§å°ä¸º 300-500M ä¸ç­‰ã€‚

> å†æ¬¡æç¤ºï¼šå•æ¬¡æˆ–å¤šæ¬¡æŒ‰ä¸‹ `Tab` å¯ä»¥è¡¥å…¨æˆ–é€‰æ‹©å¯èƒ½çš„é€‰é¡¹ï¼Œå…å»è¾“å…¥æ ¡å¯¹ä¹‹è‹¦ã€‚
> éƒ¨åˆ†ç”µè„‘èœ‚é¸£å™¨ä¼šåœ¨ `Tab` æ— æ³•è¡¥å…¨æ—¶å‘å‡ºåˆºè€³çš„æç¤ºå£°ï¼Œä½¿ç”¨ `rmmod pcspkr` ç§»é™¤ã€‚

æ ¼å¼åŒ–åˆšåˆšæ–°å»ºçš„ **æ•°æ®åˆ†åŒºï¼ˆæ›¿æ¢ä¸ºä½ è‡ªå·±çš„è·¯å¾„ï¼‰**

```shell
mkfs.ext4 /dev/nvme0n1p5
```



### æŒ‚è½½åˆ†åŒº

è¯·å°† `nvme0n1p5` æ›¿æ¢ä¸ºä¹‹å‰åˆ›å»ºçš„æ•°æ®åˆ†åŒºï¼Œå°† `nvme0n1p1` æ›¿æ¢ä¸ºå·²ç»å­˜åœ¨çš„ EFI ç³»ç»Ÿåˆ†åŒº

```
mount /dev/nvme0n1p5 /mnt
```

```
mkdir /mnt/boot
mount /dev/nvme0n1p1 /mnt/boot 
```

æ£€æŸ¥æŒ‚è½½æ˜¯å¦æˆåŠŸ

```
mount
```

æ ¹ç›®å½•æŒ‚è½½ç‚¹ `/mnt` åº”å½“è¢«æŒ‚è½½åˆ° ext4 æ–‡ä»¶ç³»ç»Ÿçš„æ•°æ®åˆ†åŒº

å¯åŠ¨ç›®å½•æŒ‚è½½ç‚¹ `/mnt/boot` åº”å½“è¢«æŒ‚è½½åˆ° vfat æ–‡ä»¶ç³»ç»Ÿçš„ EFI ç³»ç»Ÿåˆ†åŒº

å¦‚æœ‰æ“ä½œå¤±è¯¯ï¼Œè¯·å–æ¶ˆæŒ‚è½½åé‡æ–°æ£€æŸ¥è¿›è¡ŒæŒ‚è½½

```
umount /mnt/boot
umount /mnt
```



## é…ç½®åŒ…ç®¡ç†å™¨ä¸å®‰è£…åŸºæœ¬åŒ…

Arch Linux çš„åŒ…ç®¡ç†å™¨ `pacman` ååˆ†å¼ºå¤§ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä¸€è¡Œå‘½ä»¤å°±å¯ä»¥æå®šè½¯ä»¶åŒ…åŠå…¶ä¾èµ–ã€‚

è¿è¡Œå‘½ä»¤ä»¥é…ç½® `pacman` æ‰€ä½¿ç”¨çš„é•œåƒæºï¼Œ`Reflector` ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬é…ç½®ä½äº China çš„ä¸‹è½½é€Ÿåº¦æœ€å¿«çš„é•œåƒæº

```
reflector --country China --sort rate --latest 5 --save /etc/pacman.d/mirrorlist
```

å¯èƒ½ä¼šæŠ¥ `WARNING` ä½†æ— éœ€ç†ä¼š



### å­¦ä¹  Vim çš„ä½¿ç”¨

ä¼‘æ¯ä¸€ä¸‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çš„æ‰€æœ‰æ–‡å­—ç¼–è¾‘å‘½ä»¤éƒ½éœ€è¦ä½¿ç”¨ `Vim`ã€‚æ¨èä½¿ç”¨ä»¥ä¸‹çš„é“¾æ¥è¿›è¡Œå­¦ä¹ ï¼Œåªéœ€è¦æŒæ¡ç¬¬ä¸€ç­‰çº§å³å¯ï¼š

> [ç®€æ˜ VIM ç»ƒçº§æ”»ç•¥](https://coolshell.cn/articles/5426.html)





æ‰“å¼€ `pacman` è®¾ç½®ï¼Œå¯ç”¨ `pacman` çš„å¹¶è¡Œä¸‹è½½åŠŸèƒ½ï¼ŒåŠ é€Ÿä¸‹è½½ï¼Œäº‹åŠåŠŸå€ã€‚

```
vim /etc/pacman.conf
```

æ‰¾åˆ° `ParallelDownloads = 5` è¿™ä¸€è¡Œå¹¶å–æ¶ˆå…¶æ³¨é‡Šã€‚



### å®‰è£…åŸºæœ¬åŒ…

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå®‰è£… Arch Linux æ‰€éœ€è¦çš„åŸºæœ¬åŒ…

```
pacstrap /mnt base base-devel linux linux-firmware dhcpcd vim reflector
```

é‡åˆ°éœ€è¦é€‰æ‹©çš„åœºåˆä¸€è·¯å›è½¦é€‰æ‹©é»˜è®¤é¡¹å³å¯

è¯·é‡ç‚¹è§‚å¯Ÿæ­¤æ­¥æ˜¯å¦è¾“å‡ºé”™è¯¯ï¼ˆè­¦å‘Šå¯å¿½ç•¥ï¼‰



## ç”Ÿæˆ Fstab æ–‡ä»¶

ç”Ÿæˆï¼ˆGenerateï¼‰è‡ªåŠ¨æŒ‚è½½åˆ†åŒºçš„ `fstab` æ–‡ä»¶ï¼ˆå³æ–‡ä»¶ç³»ç»Ÿè¡¨ File System Tableï¼‰

```
genfstab -L /mnt >> /mnt/etc/fstab
```

ç”±äºè¿™æ­¥æ¯”è¾ƒé‡è¦ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è¾“å‡ºç”Ÿæˆçš„æ–‡ä»¶æ¥æ£€æŸ¥æ˜¯å¦æ­£ç¡®ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```
cat /mnt/etc/fstab
```

å¦‚æœå‰é¢çš„æŒ‚è½½æ“ä½œæ²¡æœ‰å‡ºé”™ï¼Œåº”è¯¥è¾“å‡ºä¸” **ä»…è¾“å‡º** ä¸¤æ¡è®°å½•ï¼šï¼ˆä»¥ä½ çš„ç£ç›˜åˆ†åŒºæƒ…å†µä¸ºå‡†ï¼‰

- æ ¹åˆ†åŒº `/` è¢«æŒ‚è½½åˆ°äº†æ­¤å‰å»ºç«‹çš„ **æ•°æ®åˆ†åŒº** `/dev/nvme0n1p5`ï¼Œåˆ†åŒºçš„æ–‡ä»¶ç³»ç»Ÿä¸º `ext4`


- å¼•å¯¼åˆ†åŒº `/boot` è¢«æŒ‚è½½åˆ°äº† **ç¡¬ç›˜å·²æœ‰çš„ EFI ç³»ç»Ÿåˆ†åŒº** `/dev/nvme0n1p1`ï¼Œåˆ†åŒºçš„æ–‡ä»¶ç³»ç»Ÿä¸º `vfat`


å¦‚æœ `fstab` æ–‡ä»¶æœ‰ä»»ä½•é”™è¯¯ï¼Œè¯·å…ˆåˆ é™¤è¯¥æ–‡ä»¶

```
rm /mnt/etc/fstab
```

æ£€æŸ¥å‰é¢çš„æŒ‚è½½æ“ä½œæœ‰æ²¡æœ‰å‡ºé”™ï¼Œ`umount` ä¹‹åå†é‡æ–°æŒ‚è½½ã€ç”Ÿæˆã€‚





## æ–°ç³»ç»Ÿçš„å¿…è¦é…ç½®

> è¿™é‡Œçš„é…ç½®æµç¨‹è™½ç„¶æœ‰äº›ç¹çï¼Œä½†ä¸ä¼šåƒå‰é¢çš„æ“ä½œä¸€æ ·å®¹æ˜“å‡ºé”™ã€‚
>

### Chroot

`Chroot` æ„ä¸º `Change root` ï¼Œç›¸å½“äºæŠŠæ“çºµæƒäº¤ç»™æˆ‘ä»¬æ–°å®‰è£…ï¼ˆæˆ–å·²ç»å­˜åœ¨ï¼‰çš„ `Linux` ç³»ç»Ÿï¼Œ**æ‰§è¡Œäº†è¿™æ­¥ä»¥åï¼Œæˆ‘ä»¬çš„æ“ä½œéƒ½ç›¸å½“äºåœ¨ç£ç›˜ä¸Šæ–°è£…çš„ç³»ç»Ÿä¸­è¿›è¡Œ**ã€‚

æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

```
arch-chroot /mnt
```

é¡ºå¸¦ä¸€æï¼Œå¦‚æœä»¥åç³»ç»Ÿå‡ºç°äº†é—®é¢˜ï¼Œåªè¦æ’å…¥ä»»æ„ä¸€ä¸ªå®‰è£…æœ‰ Arch Linux é•œåƒçš„ U ç›˜å¹¶å¯åŠ¨ï¼Œå°†æˆ‘ä»¬çš„ç³»ç»Ÿæ ¹åˆ†åŒºæŒ‚è½½åˆ° `/mnt` ä¸‹ã€EFI ç³»ç»Ÿåˆ†åŒºæŒ‚è½½åˆ° `/mnt/boot` ä¸‹ï¼Œå†é€šè¿‡è¿™æ¡å‘½ä»¤å°±å¯ä»¥è¿›å…¥æˆ‘ä»¬çš„ç³»ç»Ÿè¿›è¡Œä¿®å¤æ“ä½œã€‚~~ï¼ˆç”¨ Arch çš„äººèº«è¾¹éƒ½åº”è¯¥å¸¸å¤‡ä¸€ä¸ªæ€¥æ•‘ U ç›˜ï¼‰~~



### å®‰è£…å¿…è¦è½¯ä»¶åŒ…

æ‰“å¼€ `pacman` è®¾ç½®ï¼Œå¯ç”¨ `pacman` çš„å¹¶è¡Œä¸‹è½½åŠŸèƒ½ï¼ŒåŠ é€Ÿä¸‹è½½ï¼Œäº‹åŠåŠŸå€ã€‚

```
vim /etc/pacman.conf
```

æ‰¾åˆ° `ParallelDownloads = 5` è¿™ä¸€è¡Œå¹¶å–æ¶ˆå…¶æ³¨é‡Šï¼Œå¯ä»¥å°† `5` è°ƒæ•´ä¸ºä½ æƒ³è¦çš„æ•°å€¼ã€‚



è¿è¡Œå‘½ä»¤ä»¥é…ç½® `pacman` æ‰€ä½¿ç”¨çš„é•œåƒæºï¼Œ`Reflector` ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬é…ç½®ä½äº China çš„ä¸‹è½½é€Ÿåº¦æœ€å¿«çš„é•œåƒæº

```
reflector --country China --sort rate --latest 5 --save /etc/pacman.d/mirrorlist
```

å¯èƒ½ä¼šæŠ¥ `WARNING` ä½†æ— éœ€ç†ä¼š

> ä½ å¯èƒ½ä¼šå‘ç°ï¼Œæ­¤å¤„å¯¹ pacman è¿›è¡Œçš„æ“ä½œä¼¼æ›¾ç›¸è¯†ã€‚è¿™æ˜¯ç”±äºä¹‹å‰æˆ‘ä»¬è¿›è¡Œé…ç½®çš„å¯¹è±¡æ˜¯ U ç›˜ç³»ç»Ÿä¹‹ä¸­çš„ pacmanï¼Œåœ¨ chroot åˆ°æ–°çš„ç³»ç»Ÿåéœ€è¦é‡æ–°é…ç½®



ç›®å‰ï¼Œç³»ç»Ÿæ ¹ç›®å½•å·²ç»ä» U ç›˜åˆ‡æ¢åˆ°äº†ç¡¬ç›˜ä¸­ï¼Œéœ€è¦å®‰è£…ä¸€äº›å¿…éœ€çš„è½¯ä»¶åŒ…

```
pacman -S dialog wpa_supplicant ntfs-3g networkmanager netctl git
```

é‡åˆ°éœ€è¦é€‰æ‹©çš„åœºåˆä¸€è·¯å›è½¦é€‰æ‹©é»˜è®¤é¡¹å³å¯ã€‚



### è®¾ç½®æ—¶åŒºã€åœ°åŒºä¸è¯­è¨€ä¿¡æ¯

ä¾æ¬¡æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è®¾ç½®æˆ‘ä»¬çš„æ—¶åŒºä¸ºä¸Šæµ·ï¼Œå¹¶ç”Ÿæˆç›¸å…³æ–‡ä»¶

```
ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
hwclock --systohc
```



æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œè®¾ç½®æˆ‘ä»¬ä½¿ç”¨çš„è¯­è¨€é€‰é¡¹

```
vim /etc/locale.gen
```

åœ¨æ–‡ä»¶ä¸­æ‰¾åˆ° `en_US.UTF-8 UTF-8`ã€`zh_CN.UTF-8 UTF-8` ã€`zh_HK.UTF-8 UTF-8` åŠ `zh_TW.UTF-8 UTF-8`  è¿™å››è¡Œï¼Œå»æ‰è¡Œé¦–çš„ # å·ï¼Œä¿å­˜å¹¶é€€å‡ºã€‚

æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œç³»ç»Ÿä¼šç”Ÿæˆæˆ‘ä»¬éœ€è¦çš„æœ¬åœ°åŒ–æ–‡ä»¶

```
locale-gen
```



æ‰“å¼€ï¼ˆä¸å­˜åœ¨æ—¶ä¼šåˆ›å»ºï¼‰`/etc/locale.conf`æ–‡ä»¶ï¼š

```
vim /etc/locale.conf
```

åœ¨æ–‡ä»¶çš„ç¬¬ä¸€è¡ŒåŠ å…¥ä»¥ä¸‹å†…å®¹

```
LANG=en_US.UTF-8
```

ä¿å­˜å¹¶é€€å‡º



### è®¾ç½®ä¸»æœºå

æ‰“å¼€ï¼ˆä¸å­˜åœ¨æ—¶ä¼šåˆ›å»ºï¼‰`/etc/hostname` æ–‡ä»¶ï¼š

```
vim /etc/hostname
```

åœ¨æ–‡ä»¶çš„ç¬¬ä¸€è¡Œè¾“å…¥ä½ è‡ªå·±è®¾å®šçš„ä¸€ä¸ª `myhostname`ï¼Œè¿™å°†ä¼šæ˜¯ä½ çš„ **è®¡ç®—æœºå**ï¼Œä¿å­˜å¹¶é€€å‡ºã€‚



æ‰“å¼€ï¼ˆä¸å­˜åœ¨æ—¶ä¼šåˆ›å»ºï¼‰`/etc/hosts` æ–‡ä»¶ï¼š

```
vim /etc/hosts
```

åœ¨æ–‡ä»¶æœ«æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼ˆå°† `myhostname` æ›¿æ¢æˆä½ è‡ªå·±è®¾å®šçš„ä¸»æœºåï¼‰ï¼Œä¿å­˜å¹¶é€€å‡ºã€‚

```
127.0.0.1	localhost
::1		localhost
127.0.1.1	myhostname.localdomain	myhostname
```



### è®¾ç½® Root å¯†ç 

`root` è´¦æˆ·æ˜¯ `Linux` ç³»ç»Ÿä¸­çš„æœ€é«˜æƒé™è´¦æˆ·ï¼Œéœ€è¦è®¾ç½®å¯†ç ä¿æŠ¤èµ·æ¥ï¼Œä»¥å…æ— æ„é—´å®æ–½äº†ç ´åæ€§çš„æ•æ„Ÿæ“ä½œã€‚

```
passwd
```



### æ–°å»ºç”¨æˆ·ä¸é…ç½® sudo

> å…³äºè¿™ä¸€æ­¥æ“ä½œçš„è¯´æ˜ï¼Œå¯ä»¥æŸ¥çœ‹ [æ•™ç¨‹](https://www.viseator.com/2017/05/19/arch_setup/#%E6%96%B0%E5%BB%BA%E7%94%A8%E6%88%B7)

è¯·è‡ªè¡Œæ›¿æ¢ `username` ä¸ºä½ æƒ³è¦ä½¿ç”¨çš„ç”¨æˆ·å

```
useradd -m -G wheel username
```

```
passwd username
```

ä¸ºäº†åœ¨æ™®é€šç”¨æˆ·ä¸‹ä½¿ç”¨ root æ“ä½œï¼Œéœ€è¦é…ç½® sudo

```
pacman -S sudo
```

```
vim /etc/sudoers
```

æ‰¾åˆ° `# %wheel ALL=(ALL:ALL) ALL`ï¼Œå–æ¶ˆæ³¨é‡Šå¹¶ä¿å­˜é€€å‡ºã€‚

> æˆ–è®¸æœ‰çš„äººå·²ç»å‘ç° Arch Wiki å’Œä¸€äº›å…¶ä»–æ•™ç¨‹èµ„æ–™ä¸­çš„å‘½ä»¤æ˜¯ä»¥ `#` æˆ– `$` å¼€å¤´çš„ï¼Œè¿™ä¸¤ä¸ªç¬¦å·å°±å¯¹åº”ç€å‘½ä»¤è¡Œä¸­çš„å‘½ä»¤æç¤ºç¬¦ï¼Œ`#` ä»£è¡¨ä»¥ `Root` ç”¨æˆ·æ‰§è¡Œå‘½ä»¤ï¼Œ`$` ä»£è¡¨ä»¥æ™®é€šç”¨æˆ·æ‰§è¡Œå‘½ä»¤ï¼Œå¹³æ—¶ä½¿ç”¨æ•™ç¨‹ä¸­çš„å‘½ä»¤æ—¶åº”è¯¥æ³¨æ„è¿™ä¸€ç‚¹ã€‚
>



### å®‰è£…å¤„ç†å™¨å¾®ç 

æ˜¾ç„¶ä½ åº”è¯¥æ ¹æ®ä½ ç”µè„‘çš„ CPU å‹å·é€‰å–ä¸€ä¸ªåŒ…è¿›è¡Œå®‰è£…

```
pacman -S intel-ucode
pacman -S amd-ucode
```





## é…ç½®ç³»ç»Ÿå¼•å¯¼

æ­¤å¤„ä½¿ç”¨ `grub` è¿›è¡Œç³»ç»Ÿå¼•å¯¼ï¼Œå…ˆå®‰è£…å¿…è¦çš„åŒ…

```
pacman -S os-prober ntfs-3g grub efibootmgr
```

å¯ç”¨ `os-prober`ï¼šç¼–è¾‘ grub è®¾ç½®ï¼Œå–æ¶ˆæ³¨é‡Šä¸‹è¿°è®¾ç½®é¡¹

```
vim /etc/default/grub
```

```
# GRUB_DISABLE_OS_PROBER=false
```

éƒ¨ç½² `grub`

```
grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=grub
```

ç”Ÿæˆé…ç½®æ–‡ä»¶

```
grub-mkconfig -o /boot/grub/grub.cfg
```

æ£€æŸ¥æ–‡ä»¶æœ«å°¾çš„ `menuenrtry` æ˜¯å¦æœ‰ Arch Linux å…¥å£

```
vim /boot/grub/grub.cfg
```



è‹¥æœ‰ä»»ä½•æŠ¥é”™è¯·æŸ¥é˜… Arch Wikiã€æ•™ç¨‹æˆ–è‡ªè¡Œæœç´¢





## åˆ›å»ºäº¤æ¢æ–‡ä»¶

äº¤æ¢æ–‡ä»¶å¯ä»¥åœ¨ç‰©ç†å†…å­˜ä¸è¶³çš„æ—¶å€™å°†éƒ¨åˆ†å†…å­˜æš‚å­˜åˆ°äº¤æ¢æ–‡ä»¶ä¸­ï¼Œé¿å…ç³»ç»Ÿç”±äºå†…å­˜ä¸è¶³è€Œå®Œå…¨åœæ­¢å·¥ä½œã€‚ä¹‹å‰é€šå¸¸é‡‡ç”¨å•ç‹¬ä¸€ä¸ªåˆ†åŒºçš„æ–¹å¼ä½œä¸ºäº¤æ¢åˆ†åŒºï¼Œç°åœ¨æ›´æ¨èé‡‡ç”¨äº¤æ¢æ–‡ä»¶çš„æ–¹å¼ï¼Œæ›´ä¾¿äºæˆ‘ä»¬çš„ç®¡ç†ã€‚åˆ†é…ä¸€å—ç©ºé—´ç”¨äºäº¤æ¢æ–‡ä»¶ï¼Œæ‰§è¡Œï¼š

```
dd if=/dev/zero of=/swapfile bs=1M count=8192 status=progress
```

å°† `8192` æ¢æˆéœ€è¦çš„å¤§å°ï¼Œå•ä½ Mbï¼Œä¸€èˆ¬ä¸è®¡ç®—æœº RAM å¤§å°ä¸€è‡´å³å¯ã€‚

æ›´æ”¹æƒé™ï¼Œæ‰§è¡Œï¼š

```
chmod 600 /swapfile
```

è®¾ç½®äº¤æ¢æ–‡ä»¶ï¼Œæ‰§è¡Œï¼š

```
mkswap /swapfile
```

å¯ç”¨äº¤æ¢æ–‡ä»¶ï¼Œæ‰§è¡Œï¼š

```
swapon /swapfile
```

æœ€åæˆ‘ä»¬éœ€è¦ç¼–è¾‘ `/etc/fstab` ä¸ºäº¤æ¢æ–‡ä»¶è®¾ç½®ä¸€ä¸ªå…¥å£ï¼Œä½¿ç”¨ `Vim` æ‰“å¼€æ–‡ä»¶ï¼š

```
vim /etc/fstab
```

**æ³¨æ„ç¼–è¾‘ `fstab` æ–‡ä»¶çš„æ—¶å€™è¦æ ¼å¤–æ³¨æ„ä¸è¦ä¿®æ”¹ä¹‹å‰çš„å†…å®¹ï¼Œç›´æ¥åœ¨æœ€åæ–°èµ·ä¸€è¡ŒåŠ å…¥ä»¥ä¸‹å†…å®¹**ï¼š

```
/swapfile none swap defaults 0 0
```





## å®‰è£…å›¾å½¢ç•Œé¢

> å†æ¬¡æé†’ï¼Œä½ åº”å½“å¼€å¯ `pacman` çš„å¹¶è¡Œä¸‹è½½åŠŸèƒ½
>
> é‡åˆ°éœ€è¦é€‰æ‹©çš„åœºåˆä¸€è·¯å›è½¦é€‰æ‹©é»˜è®¤é¡¹å³å¯
>

å®‰è£… Xorg å›¾å½¢æœåŠ¡

```
pacman -S xorg
```

åˆæ¬¡å®‰è£…ä¸€èˆ¬åœ¨ [KDE Plasma](https://kde.org/plasma-desktop/) ä¸ [GNOME](https://www.gnome.org/) ä¸¤ç§å›¾å½¢ç•Œé¢ä¸­é€‰æ‹©å…¶ä¸€ï¼Œé€‰æ‹©ä½ è®¤ä¸ºå¥½çœ‹çš„å³å¯ï¼Œæ—¥åå¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œå¸è½½æ›¿æ¢

### GNOME

å®‰è£… GNOME

```
pacman -S gnome gdm
```

è®¾ç½® gdm å¼€æœºå¯åŠ¨

```
systemctl enable gdm
```

### KDE Plasma

å®‰è£… KDE Plasma ä¸ æ¡Œé¢ç®¡ç†å™¨ sddm

```
pacman -S plasma kde-applications sddm
```

è®¾ç½® sddm å¼€æœºå¯åŠ¨

```
systemctl enable sddm
```



### ç½‘ç»œæœåŠ¡

å¯ç”¨é€‚ç”¨äºæ¡Œé¢ç¯å¢ƒçš„ç½‘ç»œæœåŠ¡ `NetworkManager`

```
systemctl disable netctl
systemctl enable NetworkManager
```

`reboot`ï¼Œè¿›å…¥å›¾å½¢ç•Œé¢



## å®‰è£…åé…ç½®ä¸æç¤º

è¿™é‡Œçš„å†…å®¹æ ¹æ®æœ¬äººä¹ æƒ¯é…ç½®è¿›è¡Œï¼Œæ—¶ä¸æ—¶æ›´æ–°ä¸€ä¸‹ï¼Œæ–¹ä¾¿ç‚¸ç³»ç»Ÿä¹‹åé‡è£…



### ç»™æ–°æ‰‹çš„æç¤º

**å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡å®‰è£… Arch Linuxï¼Œæ­å–œä½ ï¼Œä½ å·²ç»èµ°å®Œäº†æ•´ä¸ªå®‰è£…æ•™ç¨‹çš„ä¸€åŠï¼ğŸ‰**

è¯·ä½ åå’Œæ”¾å®½ï¼Œæ‰“å¼€ç³»ç»Ÿè‡ªå¸¦çš„é»˜è®¤ç½‘é¡µæµè§ˆå™¨ï¼Œåœ¨æœ¬æœºæŸ¥çœ‹æ­¤æ•™ç¨‹ï¼Œæ–¹ä¾¿ä½ è¿›è¡Œå‘½ä»¤çš„å¤åˆ¶ç²˜è´´

å¦‚æœä½ ä¸ä¹ æƒ¯ä½¿ç”¨è‡ªå¸¦çš„æ¯›å¯æˆ¿æµè§ˆå™¨ï¼Œå¯ä»¥å®‰è£… Chromium

```
sudo pacman -S chromium
```

å¦‚æœä½ å‘ç°ä¸­æ–‡ç­‰ Unicode å­—ç¬¦æ˜¾ç¤ºä¸ºå°æ–¹å—ï¼Œè¯·å®‰è£…ä¸­æ–‡å­—ä½“åé‡å¯

```
sudo pacman -S noto-fonts-cjk
reboot
```



### ç¤¾åŒºæ”¯æŒ

Arch Linux æœ‰å®Œå–„çš„ Wiki ä¸æ´»è·ƒçš„ç¤¾åŒºæ”¯æŒï¼Œæœ‰ä»»ä½•é—®é¢˜å…ˆåœ¨ Wiki å†…æŸ¥æ‰¾ä»¥åŠ Google ä¸€ä¸‹ï¼Œ ç»å¤§éƒ¨åˆ†é—®é¢˜éƒ½ä¼šæ‰¾åˆ°è§£å†³æ–¹æ¡ˆ



### æ»šåŠ¨æ›´æ–°

åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œè¦äº†è§£ Arch Linux ä½¿ç”¨çš„æ˜¯æ¿€è¿›çš„æ»šåŠ¨æ›´æ–°ç­–ç•¥ï¼Œä½ çš„ç³»ç»Ÿå¯ä»¥æ—¶åˆ»ä¿æŒå¹¶ä¸”ä¹Ÿ **å¿…é¡»ä¿æŒ** æœ€æ–°çš„å†…æ ¸ç‰ˆæœ¬ä¸æœ€æ–°çš„è½¯ä»¶ç‰ˆæœ¬ã€‚

å› æ­¤åœ¨ä½ å®‰è£…è½¯ä»¶åŒ…çš„æ—¶å€™ï¼Œ`pacman` çš„å‘½ä»¤åº”å½“ä»ç®€å•çš„ *å®‰è£…* å˜ä¸º **å®‰è£…è½¯ä»¶åŒ…+åŒæ­¥è½¯ä»¶èµ„æ–™åº“+è¿›è¡Œå…¨é¢ç³»ç»Ÿæ›´æ–°**ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼š

```
sudo pacman -S package-name
```

åº”å½“æ”¹ä¸º

```
sudo pacman -Syu package-name
```



### ä»£ç†é…ç½®

å¦‚æœä½ ä½¿ç”¨ clash è¿›è¡Œå›½é™…è”ç½‘ï¼Œå¯ä»¥ç›´æ¥ä¸‹è½½ [Clash Verge](https://github.com/zzzgydi/clash-verge)ï¼Œæ³¨æ„é€‰æ‹© amd64 æ¶æ„ç‰ˆæœ¬ï¼Œç›´æ¥åœ¨å‘½ä»¤è¡Œè¿è¡Œå³å¯

å¦‚æœä½ å·²ç»å¤„äºå›½é™…è”ç½‘çš„ç¯å¢ƒä¸­ï¼Œåœ¨å®Œæˆäº†ä¸‹ä¸€èŠ‚çš„é…ç½®åï¼Œå¯ä»¥ä½¿ç”¨ yay å®‰è£…

```
yay -Syu clash-verge
```



- åœ¨ `System Settings` ä¸­æœç´¢ `proxy`ï¼Œæ‰‹åŠ¨å°†ä»£ç†åœ°å€è®¾ç½®ä¸º `127.0.0.1`ï¼ŒClash é»˜è®¤ç«¯å£ä¸º `7890`

- è®¾ç½® `Git` ä»£ç†ï¼š

  ```
  git config --global http.proxy "http://127.0.0.1:7890"
  ```

- è®¾ç½®ç»ˆç«¯ä»£ç†ï¼šå°† cfw ä¸­çš„å‘½ä»¤æ‰‹åŠ¨ç²˜è´´åˆ°ç»ˆç«¯ä¸­å›è½¦ï¼Œä½†åªåœ¨æœ¬æ¬¡å¯¹è¯ä¸­ç”Ÿæ•ˆ

  ```
  export https_proxy=http://127.0.0.1:7890;
  export http_proxy=http://127.0.0.1:7890;
  export all_proxy=socks5://127.0.0.1:7890
  ```



### AUR helper: yay

Arch Linux é™¤äº†å®˜æ–¹æºä¹‹å¤–ï¼Œè¿˜æ‹¥æœ‰å¹¿å¤§ç¤¾åŒºç”¨æˆ·ç»´æŠ¤çš„ **Arch ç”¨æˆ·è½¯ä»¶ä»“åº“**ï¼ˆArch User Repositoryï¼Œç®€ç§° AURï¼‰å¯ä¾›ä½¿ç”¨ï¼Œæå¤§ä¸°å¯Œäº† Arch Linux çš„è½¯ä»¶åº“ï¼Œç”¨æˆ·ä½“éªŒ++

åœ¨ä¸å›½é™…äº’è”ç½‘è”é€šçš„ç¯å¢ƒä¸‹ï¼Œå®‰è£…å¯ä»¥è®©æˆ‘ä»¬ä¾¿æ·å®‰è£… AUR åŒ…çš„ `yay`

```
pacman -S --needed git base-devel
git clone https://aur.archlinux.org/yay.git
cd yay
makepkg -si
```



### Code - OSS or VS Code

å‰è€…å¼€æºï¼Œåè€…æ˜¯å¾®è½¯åŸºäºå¼€æºé¡¹ç›®äºŒæ¬¡å¼€å‘çš„è½¯ä»¶ï¼Œå¯ä»¥ç±»æ¯” Chromium ä¸ Google Chrome

å®‰è£… Code - OSS

```
sudo pacman -Syu code
```

æˆ–è€… Visual Studio Code

```
yay -Syu visual-studio-code-bin
```

è£…å¥½ä¹‹åå¯ä»¥ç”¨ code ä»£æ›¿ nano æˆ– vim ç­‰å‘½ä»¤è¡Œç¼–è¾‘å™¨è¿›è¡Œæ–‡æœ¬ç¼–è¾‘

å¯ä»¥ä¿®æ”¹ git çš„é»˜è®¤ç¼–è¾‘å™¨ä¸º code

```
git config --global core.editor "code --wait"
```



### zsh ä¸ oh-my-zsh

zsh æ¯”ç³»ç»Ÿé»˜è®¤æ­è½½çš„ bash æ›´å¥½ç”¨ï¼Œæ­é…ä¸Šç¤¾åŒºæ”¯æŒçš„é¡¹ç›® [oh-my-zsh](https://ohmyz.sh/)ï¼Œæ’ä»¶å’Œä¸»é¢˜éƒ½å¾ˆé½å…¨

```
yay -Syu zsh
```

```
sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
```

- åˆ‡æ¢é»˜è®¤ shell ä¸º zsh

```
sudo chsh -s /bin/zsh username
```

reboot åå†æ¬¡æ‰“å¼€ç»ˆç«¯ï¼Œæˆ–ç›´æ¥è¿è¡Œ zshï¼Œå°±èƒ½çœ‹åˆ°å¸¦é¢œè‰²çš„é»˜è®¤ robbyrussell ä¸»é¢˜ zsh äº†

- ç¼–è¾‘ `~/.zshrc`ï¼Œæ‰¾åˆ° plugins è¡Œï¼ŒåŠ å…¥æˆ‘æ¨èçš„å‡ ä¸ªæ’ä»¶

```
code ~/.zshrc
```

```
plugins=(git z sudo zsh-syntax-highlighting zsh-autosuggestions)
```

å…¶ä¸­ [zsh-syntax-highlighting](https://github.com/zsh-users/zsh-syntax-highlighting/blob/master/INSTALL.md#oh-my-zsh) ä¸ [zsh-autosuggestions](https://github.com/zsh-users/zsh-autosuggestions/blob/master/INSTALL.md#oh-my-zsh) éœ€è¦è‡ªè¡Œå®‰è£…ï¼Œæˆ–è€…å¯ä»¥çœ‹è¿™ä¸ª [gist](https://gist.github.com/dogrocker/1efb8fd9427779c827058f873b94df95)

æ¥ç€åœ¨ `.zshrc` ä¸­ç²˜è´´ä¸Šæ–‡ä»£ç†ä¸­çš„ä¸‰è¡Œç»ˆç«¯å‘½ä»¤ï¼Œzsh æ¯æ¬¡å¯åŠ¨éƒ½ä¼šè¯»å– `.zshrc` åˆå§‹åŒ–ï¼Œå³å¯è‡ªåŠ¨åŒ–é…ç½®ç»ˆç«¯ä»£ç†



### Git

éšæ‰‹é…é…èƒ½ç”¨å°±è¡Œ

- ä»£ç†å’Œé…ç½®ç¼–è¾‘å™¨åœ¨å‰é¢æåˆ°äº†

- [git-credential-manager](https://github.com/GitCredentialManager/git-credential-manager)ï¼šAUR ä¸‹ä¸€ä¸ªï¼Œå­˜ GitHub HTTPS å¯†é’¥ç”¨

- ç»™ commit æ•´ä¸€ä¸‹ [GPG ç­¾å](https://docs.github.com/en/authentication/managing-commit-signature-verification/about-commit-signature-verification)



### ä¸­æ–‡å­—ä½“ä¸ä¸­æ–‡è¾“å…¥æ³•

å‚ç…§ï¼š[ç®€ä½“ä¸­æ–‡æœ¬åœ°åŒ– - Arch Linux ä¸­æ–‡ç»´åŸº](https://wiki.archlinuxcn.org/wiki/%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%E6%9C%AC%E5%9C%B0%E5%8C%96)

åœ¨ç³»ç»Ÿè¯­è¨€è®¾ç½®å†…åŠ å…¥ä¸­æ–‡ï¼Œå®‰è£…ä¸­æ–‡å­—ä½“ä¸ä¸­æ–‡è¾“å…¥æ³•åé‡å¯å³å¯

```
yay -Syu noto-fonts-cjk noto-fonts-emoji
```

å¯ä»¥ä½¿ç”¨ fcitx4 çš„æœç‹—è¾“å…¥æ³•ï¼Œæˆ–åœ¨ fcitx5 çš„æ‹¼éŸ³è¾“å…¥æ³•ä¸­å¯¼å…¥æœç‹—è¯åº“ï¼Œå‚ç…§ [fcitx](https://wiki.archlinux.org/title/fcitx#Chinese) ä¸ [fcitx5](https://wiki.archlinux.org/title/fcitx5#Chinese)

å®‰è£… fcitx5 åŠç»„ä»¶ï¼Œè‡ªè¡Œåœ¨åº”ç”¨åˆ—è¡¨ä¸­æ‰“å¼€ Fcitx5 Configuation å›¾å½¢åŒ–ç•Œé¢å·¥å…·ï¼Œæ·»åŠ ä¸­è‹±æ–‡è¾“å…¥æ³•åå³å¯ä½¿ç”¨ï¼Œå…·ä½“å‚ç…§ Arch Wiki
```
yay -Syu fcitx5-im fcitx5-chinese-addons fcitx5-qt fcitx5-gtk
```

ä¿®æ”¹ `/etc/environment` æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶å¼€å¤´åŠ å…¥å¦‚ä¸‹å†…å®¹ï¼š

```
GTK_IM_MODULE=fcitx
QT_IM_MODULE=fcitx
XMODIFIERS=@im=fcitx
INPUT_METHOD=fcitx
SDL_IM_MODULE=fcitx
GLFW_IM_MODULE=ibus
```

å¯ä»¥è§£å†³ä¸€äº›è½¯ä»¶æ— æ³•è°ƒå‡º `fcitx` çš„é—®é¢˜



### è“ç‰™é…ç½®

å‚ç…§ [Arch wiki](https://wiki.archlinux.org/title/Bluetooth#Installation)

```
yay -Syu bluez bluez-utils blueman
```

```
systemctl start bluetooth.service && systemctl enable bluetooth.service
```



### æµè§ˆå™¨

æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œ~~ä½†æˆ‘å–œæ¬¢ç”¨ Edge~~

```
yay -Syu google-chrome
```

```
yay -Syu microsoft-edge-dev-bin
```

```
yay -Syu chromium
```

 

### QQã€å¾®ä¿¡ä¸é£ä¹¦

ä½¿ç”¨ yay å®‰è£… AUR åŒ…å³å¯

[linuxqq](https://aur.archlinux.org/packages/linuxqq)

[deepin-wine-wechat](https://github.com/vufa/deepin-wine-wechat-arch)

[feishu-bin](https://aur.archlinux.org/packages/feishu-bin)



### Grub å¼•å¯¼ç‚¸äº†

~~å°å¿ƒ Windows~~

æ’å…¥å†™å…¥æœ‰ Arch Linux å®‰è£…ä»‹è´¨çš„ U ç›˜ï¼Œè”ç½‘åå…ˆ mount `/` ä¸ `/boot`ï¼ˆå‚è€ƒ **æŒ‚è½½åˆ†åŒº** ä¸€èŠ‚ï¼‰ï¼Œ ä¹‹å `arch-chroot` åˆ° `/mnt` è¿›è¡ŒæŠ¢æ•‘ï¼Œå…ˆé‡è£…ä¸€ä¸‹å†…æ ¸ï¼ˆ`pacman -S linux`ï¼‰è¿™ä¸€æ­¥ä¼šè‡ªåŠ¨ä¸ºä½ é‡æ–°ç”Ÿæˆ `initramfs` é•œåƒï¼Œç„¶åè·³è‡³ **é…ç½®ç³»ç»Ÿå¼•å¯¼** çš„ **éƒ¨ç½² grub** ç¯èŠ‚ç…§åšã€‚



### Windows å¼•å¯¼ç‚¸äº†

å¦‚æœä½ ä¸ç»æ„é—´å°† Windows æ‰€åœ¨çš„ EFI åˆ†åŒºæ ¼å¼åŒ–/æ“¦é™¤æ‰äº†ï¼Œä½ å°†æ— æ³•æ­£å¸¸å¼•å¯¼è¿›å…¥ Windowsï¼Œæˆ‘ä»¬éœ€è¦åƒåˆ¶ä½œä¸€å¼  Arch Linux å®‰è£…é•œåƒä¸€æ ·ï¼Œåˆ¶ä½œä¸€å¼  Windows å¯åŠ¨ç›˜ï¼Œç„¶åè¿›å…¥å‘½ä»¤è¡Œï¼Œæ ¹æ® C ç›˜ä¸­çš„ Windows ç³»ç»Ÿæ–‡ä»¶è¿›è¡Œå¼•å¯¼é‡å»ºã€‚

[Restoring an accidentally deleted EFI system partition](https://wiki.archlinux.org/title/Dual_boot_with_Windows#Restoring_an_accidentally_deleted_EFI_system_partition)